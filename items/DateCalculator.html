<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>日期计算器</title>
    <style>
        /* 基础样式重置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: white;
            color: #2c3e50;
            line-height: 1.6;
        }

        /* 标题样式 */
        h1 {
            text-align: center;
            color: #333;
            margin: 0 0 20px 0;
            padding: 0;
            font-size: 28px;
            flex-shrink: 0;
        }

        /* 主容器样式 */
        .container {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* 功能按钮区域 */
        .function-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 25px;
        }

        .function-button {
            padding: 12px 15px;
            background-color: #f8f9fa;
            color: #2c3e50;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            font-weight: 500;
        }

        .function-button:hover {
            background-color: #e9ecef;
            transform: translateY(-2px);
        }

        .function-button.active {
            background-color: #4299e1;
            color: white;
            border-color: #4299e1;
            box-shadow: 0 2px 4px rgba(66, 153, 225, 0.3);
        }

        /* 输入区域样式 */
        .input-section {
            margin: 20px 0;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #4a5568;
        }

        input[type="date"],
        input[type="number"],
        select {
            width: 100%;
            padding: 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        input[type="date"]:focus,
        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.2);
        }

        /* 双列输入布局 */
        .dual-input {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .dual-input .input-group {
            margin-bottom: 0;
        }

        /* 在小屏幕上改为单列 */
        @media (max-width: 480px) {
            .dual-input {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .dual-input .input-group {
                margin-bottom: 15px;
            }
        }

        /* 结果显示区域 */
        .result-section {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
            font-weight: 500;
        }

        .result-content {
            text-align: center;
            color: #2d3748;
        }

        .result-highlight {
            color: #4299e1;
            font-size: 1.3em;
            font-weight: 600;
        }

        /* 操作按钮区域 */
        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .action-button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        #clearBtn {
            background-color: #e53e3e;
            color: white;
        }

        #calculateBtn {
            background-color: #48bb78;
            color: white;
        }

        #copyBtn {
            background-color: #4299e1;
            color: white;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .action-button:disabled {
            background-color: #a0a0a0;
            cursor: not-allowed;
            transform: none;
        }

        /* 隐藏样式 */
        .hidden {
            display: none !important;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            .function-buttons {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .action-buttons {
                flex-direction: column;
            }

            .action-button {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <h1>日期计算器</h1>
    <div class="container">
        <div class="function-buttons">
            <button class="function-button" data-function="A">A-计算未来/过去日期</button>
            <button class="function-button" data-function="B">B-计算两日期相差天数</button>
        </div>

        <div class="input-section">
            <!-- 功能A的输入区域 -->
            <div id="inputA" class="input-area hidden">
                <div class="input-group">
                    <label for="startDate">起始日期：</label>
                    <input type="date" id="startDate" min="1900-01-01" max="2100-12-31">
                </div>
                <div class="dual-input">
                    <div class="input-group">
                        <label for="timeValue">数量（正数为未来，负数为过去）：</label>
                        <input type="number" id="timeValue" placeholder="例如：30 或 -15">
                    </div>
                    <div class="input-group">
                        <label for="timeUnit">时间单位：</label>
                        <select id="timeUnit">
                            <option value="days">天</option>
                            <option value="weeks">周</option>
                            <option value="months">月（自然月）</option>
                            <option value="years">年</option>
                            <option value="calendar-months">公历月（30天）</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- 功能B的输入区域 -->
            <div id="inputB" class="input-area hidden">
                <div class="input-group">
                    <label for="date1">第一个日期：</label>
                    <input type="date" id="date1" min="1900-01-01" max="2100-12-31">
                </div>
                <div class="input-group">
                    <label for="date2">第二个日期：</label>
                    <input type="date" id="date2" min="1900-01-01" max="2100-12-31">
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <button class="action-button" id="clearBtn">清除</button>
            <button class="action-button" id="calculateBtn" disabled>计算</button>
            <button class="action-button" id="copyBtn">复制结果</button>
        </div>

        <div class="result-section">
            <div class="result-content" id="result">
                <div style="color: #a0aec0;">请选择功能并输入数据进行计算</div>
            </div>
        </div>
    </div>

    <script>
        let selectedFunction = '';

        // 功能按钮点击事件
        document.querySelectorAll('.function-button').forEach(button => {
            button.addEventListener('click', function () {
                document.querySelectorAll('.function-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.classList.add('active');
                selectedFunction = this.dataset.function;

                // 隐藏所有输入区域
                document.querySelectorAll('.input-area').forEach(area => {
                    area.classList.add('hidden');
                });

                // 显示对应的输入区域
                document.getElementById(`input${selectedFunction}`).classList.remove('hidden');

                // 启用计算按钮
                document.getElementById('calculateBtn').disabled = false;

                // 清空结果
                clearResult();

                // 设置今天的日期作为默认值
                setDefaultDates();
            });
        });

        // 设置默认日期
        function setDefaultDates() {
            const today = new Date().toISOString().split('T')[0];
            if (selectedFunction === 'A') {
                document.getElementById('startDate').value = today;
            } else if (selectedFunction === 'B') {
                document.getElementById('date1').value = today;
            }
        }

        // 清除按钮
        document.getElementById('clearBtn').addEventListener('click', function () {
            if (selectedFunction === 'A') {
                document.getElementById('startDate').value = '';
                document.getElementById('timeValue').value = '';
                document.getElementById('timeUnit').value = 'days';
            } else if (selectedFunction === 'B') {
                document.getElementById('date1').value = '';
                document.getElementById('date2').value = '';
            }
            clearResult();
        });

        // 复制按钮
        document.getElementById('copyBtn').addEventListener('click', function () {
            const resultText = document.getElementById('result').textContent;
            if (resultText && !resultText.includes('请选择功能')) {
                navigator.clipboard.writeText(resultText).then(() => {
                    // 临时显示复制成功提示
                    const originalText = document.getElementById('copyBtn').textContent;
                    document.getElementById('copyBtn').textContent = '已复制！';
                    setTimeout(() => {
                        document.getElementById('copyBtn').textContent = originalText;
                    }, 1000);
                });
            }
        });

        // 计算按钮
        document.getElementById('calculateBtn').addEventListener('click', function () {
            if (!selectedFunction) {
                alert('请先选择一个计算功能！');
                return;
            }

            let result = '';

            if (selectedFunction === 'A') {
                const startDate = document.getElementById('startDate').value;
                const timeValue = parseInt(document.getElementById('timeValue').value);
                const timeUnit = document.getElementById('timeUnit').value;

                if (!startDate || isNaN(timeValue)) {
                    alert('请输入完整的日期和时间！');
                    return;
                }

                const date = new Date(startDate);
                switch (timeUnit) {
                    case 'days':
                        date.setDate(date.getDate() + timeValue);
                        break;
                    case 'weeks':
                        date.setDate(date.getDate() + timeValue * 7);
                        break;
                    case 'months':
                        date.setMonth(date.getMonth() + timeValue);
                        break;
                    case 'years':
                        date.setFullYear(date.getFullYear() + timeValue);
                        break;
                    case 'calendar-months':
                        date.setDate(date.getDate() + timeValue * 30);
                        break;
                }

                const resultDate = date.toISOString().split('T')[0];
                const weekdays = ['日', '一', '二', '三', '四', '五', '六'];
                const weekday = weekdays[date.getDay()];

                const direction = timeValue >= 0 ? '之后' : '之前';
                const absValue = Math.abs(timeValue);

                // 转换单位为中文显示
                const unitNames = {
                    'days': '天',
                    'weeks': '周',
                    'months': '月',
                    'years': '年',
                    'calendar-months': '个月'
                };
                const unitName = unitNames[timeUnit] || '天';

                result = `
                    <div>从 <span class="result-highlight">${startDate}</span> 起</div>
                    <div><span class="result-highlight">${absValue}</span> ${unitName}${direction}的日期是：</div>
                    <div class="result-highlight" style="margin-top: 10px; font-size: 1.5em;">
                        ${resultDate} (星期${weekday})
                    </div>
                `;

            } else if (selectedFunction === 'B') {
                const date1 = document.getElementById('date1').value;
                const date2 = document.getElementById('date2').value;

                if (!date1 || !date2) {
                    alert('请输入两个日期！');
                    return;
                }

                const d1 = new Date(date1);
                const d2 = new Date(date2);
                const timeDiff = Math.abs(d2.getTime() - d1.getTime());
                const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));

                const earlierDate = d1 <= d2 ? date1 : date2;
                const laterDate = d1 <= d2 ? date2 : date1;

                result = `
                    <div>从 <span class="result-highlight">${earlierDate}</span></div>
                    <div>到 <span class="result-highlight">${laterDate}</span></div>
                    <div class="result-highlight" style="margin-top: 10px; font-size: 1.5em;">
                        相差 ${daysDiff} 天
                    </div>
                `;
            }

            document.getElementById('result').innerHTML = result;
        });

        // 清空结果
        function clearResult() {
            document.getElementById('result').innerHTML = '<div style="color: #a0aec0;">请选择功能并输入数据进行计算</div>';
        }

        // 监听输入变化，自动计算（可选）
        document.addEventListener('input', function (e) {
            if (e.target.type === 'date' || e.target.type === 'number') {
                // 可以在这里添加实时计算功能
            }
        });
    </script>
</body>

</html>